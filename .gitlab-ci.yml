image: "node:13-alpine"

before_script:
  - cd ./backend
  - npm install

test:
  script:
    - npm run test:report
  artifacts:
    name: "$CI_COMMIT_REF_NAME-TEST"
    paths:
      - ./backend/reports
    expire_in: 1 week

coverage:
  script:
    - npm run test:coverage-html
  artifacts:
    name: "$CI_COMMIT_REF_NAME-COVERAGE"
    paths:
      - ./backend/coverage
    expire_in: 1 week

docs:
  script:
    - npm run jsdoc
    - npm run apidoc
  artifacts:
    name: "$CI_COMMIT_REF_NAME-DOCS"
    paths:
      - ./backend/jsdoc
      - ./backend/apidoc
    expire_in: 1 week
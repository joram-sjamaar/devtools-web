# Development Tools - Web
Backend

## Inhoudsopgave
T.B.A

## Exercise	1: Linting

### Problems
```
D:\NodeProjects\Development Tools\85\backend\index.js
  1:46  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  2:39  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  3:1   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  4:29  error  Unexpected space before function parentheses     space-before-function-paren
  4:34  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  5:50  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  6:4   error  Newline required at end of file but not found    eol-last

D:\NodeProjects\Development Tools\85\backend\server\server.js
   1:43  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
   2:36  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
   3:39  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
   4:23  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
   5:1   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
   6:25  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
   7:28  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
   8:1   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
   9:26  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  10:5   error  'todoList' is never reassigned. Use 'const' instead  prefer-const
  10:31  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  11:1   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  12:4   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  13:35  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  14:4   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  15:30  error  Unexpected space before function parentheses         space-before-function-paren
  15:43  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  16:19  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  17:32  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  18:4   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  19:1   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  20:41  error  Unexpected space before function parentheses         space-before-function-paren
  20:54  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  21:8   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  22:39  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  23:21  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  24:15  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  25:5   error  Expected space(s) after "catch"                      keyword-spacing
  25:17  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  26:21  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  27:15  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  28:4   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  29:4   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  30:1   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  31:43  error  Unexpected space before function parentheses         space-before-function-paren
  31:56  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  32:8   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  33:42  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  34:21  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  35:15  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  36:5   error  Expected space(s) after "catch"                      keyword-spacing
  36:17  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  37:21  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  38:15  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  39:4   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  40:4   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  41:1   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  42:22  error  Newline required at end of file but not found        eol-last

D:\NodeProjects\Development Tools\85\backend\server\todo.js
   1:29  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
   2:1   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
   3:4   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
   4:41  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
   5:4   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
   6:17  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
   7:6   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
   8:34  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
   9:6   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  10:18  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  11:21  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  12:4   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  13:1   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  14:6   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  15:64  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  16:41  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  17:70  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  18:6   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  19:14  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  20:32  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  21:29  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  22:13  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  23:7   error  Expected an error object to be thrown            no-throw-literal
  23:13  error  Strings must use singlequote                     quotes
  23:30  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  24:6   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  25:4   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  26:1   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  27:11  error  Missing JSDoc comment                            require-jsdoc
  27:19  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  28:41  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  29:4   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  30:1   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  31:9   error  Missing JSDoc comment                            require-jsdoc
  31:17  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  32:31  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  33:47  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  34:33  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  35:10  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  36:13  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  37:7   error  Expected an error object to be thrown            no-throw-literal
  37:13  error  Strings must use singlequote                     quotes
  37:30  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  38:6   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  39:4   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  40:1   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  41:6   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  42:34  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  43:6   error  Use @return instead                              valid-jsdoc
  43:35  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  44:6   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  45:14  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  46:23  error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  47:4   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  48:2   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  49:1   error  Expected linebreaks to be 'LF' but found 'CRLF'  linebreak-style
  50:27  error  Newline required at end of file but not found    eol-last

D:\NodeProjects\Development Tools\85\backend\test\todoTest.js
   1:38  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
   2:44  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
   3:1   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
   4:4   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
   5:72  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
   6:4   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
   7:39  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
   8:48  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
   9:17  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  10:1   error  Expected indentation of 8 spaces but found 6         indent
  10:24  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  11:1   error  Expected indentation of 8 spaces but found 6         indent
  11:41  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  12:1   error  Expected indentation of 8 spaces but found 6         indent
  12:30  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  13:6   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  14:4   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  15:1   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  16:4   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  17:13  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  18:22  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  19:34  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  20:54  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  21:45  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  22:4   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  23:49  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  24:62  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  25:17  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  26:1   error  Expected indentation of 8 spaces but found 6         indent
  26:34  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  27:1   error  Expected indentation of 8 spaces but found 6         indent
  27:41  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  28:1   error  Expected indentation of 8 spaces but found 6         indent
  28:26  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  29:6   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  30:1   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  31:72  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  32:17  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  33:1   error  Expected indentation of 8 spaces but found 6         indent
  33:24  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  34:1   error  Expected indentation of 8 spaces but found 6         indent
  34:41  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  35:1   error  Expected indentation of 8 spaces but found 6         indent
  35:40  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  36:6   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  37:1   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  38:23  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  39:4   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  40:1   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  41:4   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  42:13  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  43:65  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  44:45  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  45:42  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  46:4   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  47:51  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  48:23  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  49:1   error  Trailing spaces not allowed                          no-trailing-spaces
  49:3   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  50:1   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  51:52  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  52:17  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  53:1   error  Expected indentation of 8 spaces but found 6         indent
  53:36  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  54:1   error  Expected indentation of 8 spaces but found 6         indent
  54:41  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  55:1   error  Expected indentation of 8 spaces but found 6         indent
  55:26  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  56:6   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  57:1   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  58:1   error  This line has a length of 93. Maximum allowed is 80  max-len
  58:94  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  59:17  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  60:1   error  Expected indentation of 8 spaces but found 6         indent
  60:24  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  61:1   error  Expected indentation of 8 spaces but found 6         indent
  61:41  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  62:1   error  Expected indentation of 8 spaces but found 6         indent
  62:30  error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  63:6   error  Expected linebreaks to be 'LF' but found 'CRLF'      linebreak-style
  64:4   error  Newline required at end of file but not found        eol-last
```

### What was fixed?

Deze dingen heeft ESlint autmatisch voor ons gefixt:

 * linebreak-style
 * eol-last
 * no-trailing-spaces
 * indent
 * quotes
 * valid-jsdoc

### What was not fixed?

Dit moeten we helaas zelf oplossen

 * no-throw-literal
 * require-jsdoc
 * max-len

## Exercise	2: JSDoc
Alle stappen zijn doorlopen.

## Exercise 3: Testing the code

### Can you also run the tests without running the server? Why?
Dat ligt er aan wat je verstaat onder 'de server draaien'. De server hoeft niet van te voren ingeschakeld te worden, want Mocha start zelf de server op.

### Check out different types of reporters for mocha (https://mochajs.org/#reporters) and test with them.

Ik heb Nyan, Landing en Progress geprobeerd, die leken mij het leukst.
Helaas werkt Landing niet goed op Windows (denk ik, want er waren vraagtekens ipv characters).

### Write additional tests to achieve 100% code coverage. Make a note of these added tests in your report.

|         API Call          |                        Test                         |
| ------------------------- | --------------------------------------------------- |
| POST /api/todo/:todoItem  | should throw an error when adding a duplicate item  |
| POST /api/todo/:todoItem  | should not have added a duplicate item              |
| DELETE /api/todo/:message | should return 404 when deleting a non-existing item |

## Exercise	4: Making development easier with Nodemon

Bij elke verandering wordt de server opnieuw opgestart!

```
[nodemon] starting `node index.js`
Server running on port 3000
[nodemon] restarting due to changes...
[nodemon] starting `node index.js`
Server running on port 2000
```

## Exercise	5: Get your backend running in Gitlab CI

Mijn CI gaat uit van NodeJS 13 (oftewel de laatste versie). Ik gebruik de alpine release omdat deze erg klein is, en de job zo sneller klaar is.

Alle output heb ik als artifcats bij de job gezet. Zo wordt het volgende gegenereerd:
 * Mocha HTML report
 * Istanbul HTML report
 * APIDoc
 * JSDoc

```YAML
image: "node:13-alpine"

before_script:
  - cd ./backend
  - npm install

test:
  script:
    - npm run test:html
  artifacts:
    name: "$CI_COMMIT_REF_NAME-TEST"
    paths:
      - ./backend/reports
    expire_in: 1 week

coverage:
  script:
    - npm run coverage
  artifacts:
    name: "$CI_COMMIT_REF_NAME-COVERAGE"
    paths:
      - ./backend/coverage
    expire_in: 1 week

docs:
  script:
    - npm run jsdoc
    - npm run apidoc
  artifacts:
    name: "$CI_COMMIT_REF_NAME-DOCS"
    paths:
      - ./backend/jsdoc
      - ./backend/apidoc
    expire_in: 1 week
```

